"use strict";(self["webpackChunkborough_fe"]=self["webpackChunkborough_fe"]||[]).push([[987],{1488:(e,r,s)=>{s.r(r),s.d(r,{default:()=>p});var t=s(9835);const o={class:"fullscreen q-pa-md bg-grey-5"},a=(0,t._)("div",{class:"row q-pa-lg q-ma-lg shadown-6"},null,-1),i=[a];function n(e,r,s,a,n,l){return(0,t.wg)(),(0,t.iD)("div",o,i)}s(9981);var l=s(3100);const{LocalStorage:m,Notify:u}=s(9066),g={name:"AdminRedirect",mounted(){this.acceptRedirect()},data(){return{rememberme:!1,registerForm:{reg_opt:"",email:"",pass:"",cpass:"",fname:"",mname:"",lname:""},loginForm:{email:"",password:""},userError:"",passError:"",reg_emailError:"",reg_mnameError:"",reg_fnameError:"",reg_lnameError:"",reg_passError:"",reg_cpassError:"",reg_optError:"",tab:"loginTab",options:[{value:"doctor",label:"Doctors"},{value:"employee",label:"Employee"}]}},methods:{...(0,l.nv)("auth",["userAuthentication"]),changeTab(){this.tab="registerTab"},toLogTab(){this.tab="loginTab"},async acceptRedirect(){let e=this.$router.currentRoute._value.query.token,r=this.$router.currentRoute._value.query.role,s=this.$router.currentRoute._value.query.email;if("superadmin"!=r)return this.$q.notify({type:"negative",message:"Error  not a valid user"}),!1;let t={user_role:r,email:s};m.set("accessToken",e),m.set("userDetails",t),console.log(this.$store,"STORE!"),this.$store.state.token=e,this.$store.state.userDetails=t,this.$router.push("/")},async login(){this.loginForm.email?this.userError="":this.userError="Email is required!",this.loginForm.password?this.passError="":this.passError="Password is required!",this.loginForm.password&&this.loginForm.email&&this.userAuthentication({email:this.loginForm.email,password:this.loginForm.password}).catch((e=>{this.$q.notify({type:"negative",message:`Error  ( ${e.message} ) `})})).then((e=>{console.log(e),this.$router.push("/")}))},emptyform(e){"register"==e&&(this.registerForm={reg_opt:"",email:"",pass:"",cpass:"",fname:"",mname:"",lname:""}),"login"==e&&(this.loginForm={email:"",pass:""})}}};var h=s(1639);const c=(0,h.Z)(g,[["render",n]]),p=c}}]);